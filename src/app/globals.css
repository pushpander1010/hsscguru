@import "tailwindcss";

/* ===================== */
/* Theme tokens */
/* ===================== */
@theme {
  --color-brand-50:  #f6f9ff;
  --color-brand-100: #eaf1ff;
  --color-brand-200: #cfe0ff;
  --color-brand-300: #a9c6ff;
  --color-brand-400: #7aa6ff;
  --color-brand-500: #4b85ff;
  --color-brand-600: #2e67e6;
  --color-brand-700: #234fba;
  --color-brand-800: #1e4196;
  --color-brand-900: #1c377b;

  --radius-xl: 1rem;
  --radius-2xl: 1.25rem;
}

/* App variables */
:root {
  --bg: #0b0f1a;
  --surface: #111827;
  --surface-2: #0f172a;
  --card: #0b1220;
  --ink-100: #e5e7eb;
  --ink-200: #cbd5e1;
  --ink-300: #94a3b8;
  --shadow-soft: 0 10px 30px -12px rgba(0,0,0,0.15);

  /* Layout */
  --container-w: 56rem; /* â‰ˆ 3xl */
  --page-px-sm: 1rem;
  --page-px-md: 1.25rem;

  color-scheme: dark;
}

html, body { height: 100%; }
body { background-color: var(--bg); color: var(--ink-100); }

/* ===================== */
/* Consistent page centering + side padding */
/* ===================== */
main {
  max-width: var(--container-w);
  margin-inline: auto;
  padding-inline: var(--page-px-sm);
}
@media (min-width: 768px) {
  main { padding-inline: var(--page-px-md); }
}

/* ===================== */
/* CUSTOM UTILITIES (v4) */
/* Everything you @apply must be declared with @utility */
/* ===================== */

/* Cards */
@utility card {
  border-radius: var(--radius-2xl);
  border: 1px solid rgba(255,255,255,0.05);
  background-color: var(--card);
  backdrop-filter: blur(6px);
  padding: 1.25rem;
  box-shadow: var(--shadow-soft);
}
@utility card-hover { @apply hover:bg-white/5; }

/* Buttons */
@utility btn {
  @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 font-medium transition;
  @apply bg-brand-500 text-white hover:bg-brand-600 active:scale-[0.99];
}
@utility btn-ghost {
  @apply inline-flex items-center gap-2 rounded-xl px-3 py-2 font-medium border border-white/10;
  color: var(--ink-200);
}
.btn-ghost:hover { background-color: rgba(255,255,255,0.05); }

/* Text helpers */
@utility title { @apply text-xl font-semibold; }
@utility muted { color: var(--ink-300); }
@utility label { @apply block text-sm font-medium mb-1; }

/* Grid helper */
@utility grid-3 { @apply grid gap-4 md:grid-cols-2 lg:grid-cols-3; }

/* Alerts */
@utility alert-error { @apply rounded-xl border border-red-500/20 bg-red-500/10 p-4 text-sm; }

/* ===================== */
/* Form controls - DARK, consistent */
/* (regular CSS is fine here; not used via @apply) */
/* ===================== */
.input, .select {
  border: 1px solid rgba(255,255,255,0.10);
  background-color: var(--surface);
  color: var(--ink-100);
  border-radius: 0.75rem; /* xl */
  padding: 0.5rem 0.75rem;
  font-size: 0.9rem;
  line-height: 1.25rem;
  width: 100%;
}
.input:focus, .select:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-brand-500);
  border-color: var(--color-brand-500);
}

/* Best-effort dark options (Chromium/Firefox) */
select.select option {
  background-color: var(--surface);
  color: var(--ink-100);
}

/* Custom caret for select */
.select-wrap { position: relative; }
.select-wrap .select {
  -webkit-appearance: none;
  appearance: none;
  padding-right: 2.25rem;
  background-color: var(--surface);
}
.select-wrap .select-caret {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.8rem;
  color: var(--ink-300);
  pointer-events: none;
}

/* Base inputs */
:root {
  --control-bg: var(--surface);
  --control-fg: var(--ink-100);
  --control-border: rgba(255,255,255,0.10);
  --control-radius: 0.75rem;
  --control-px: 0.75rem;
  --control-py: 0.5rem;
  --control-ring: var(--color-brand-500);
}

input[type="text"],
input[type="number"],
input[type="email"],
input[type="password"],
input[type="search"],
textarea {
  width: 100%;
  background-color: var(--control-bg);
  color: var(--control-fg);
  border: 1px solid var(--control-border);
  border-radius: var(--control-radius);
  padding: var(--control-py) var(--control-px);
  font-size: 0.92rem;
  line-height: 1.25rem;
}
input:focus,
textarea:focus {
  outline: none;
  border-color: var(--control-ring);
  box-shadow: 0 0 0 2px var(--control-ring);
}

/* Select */
select {
  width: 100%;
  background-color: var(--control-bg);
  color: var(--control-fg);
  border: 1px solid var(--control-border);
  border-radius: var(--control-radius);
  padding: var(--control-py) calc(var(--control-px) * 2.2) var(--control-py) var(--control-px);
  font-size: 0.92rem;
  line-height: 1.25rem;
  -webkit-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat: no-repeat;
  background-position: right 0.65rem center;
  background-size: 18px 18px;
}
select:focus {
  outline: none;
  border-color: var(--control-ring);
  box-shadow: 0 0 0 2px var(--control-ring);
}
select option,
select optgroup {
  background-color: var(--card);
  color: var(--ink-100);
}
select::-ms-expand { display: none; }
select:hover { border-color: rgba(255,255,255,0.18); }

/* Label + helper text consistency (kept for non-@apply usage too) */
.label { display:block; font-size:0.875rem; font-weight:600; margin-bottom:0.375rem; }
.muted { color: var(--ink-300); }

/* ===================== */
/* Runner-specific (uses your utilities above) */
/* ===================== */
@layer components {
  .runner-bar { @apply card flex flex-wrap items-center justify-between gap-3; }
  .runner-meta { @apply flex items-center gap-3; }
  .runner-counter { @apply text-xs muted; }
  .runner-timer { @apply text-lg; }

  .palette      { @apply card; }
  .palette-title{ @apply text-sm font-medium mb-2; }
  .palette-grid { @apply flex flex-wrap gap-2; }
  .palette-legend { @apply mt-2 text-xs muted flex gap-4; }
  .legend-dot    { @apply inline-block w-3 h-3 rounded-sm border; }
  .legend-answered { @apply border-green-600 bg-green-50; }
  .legend-marked   { @apply border-purple-600; }
  .legend-unanswered { @apply border-gray-300; }

  .palette-tile { @apply min-w-9 h-9 px-2 flex items-center justify-center rounded border text-sm; }
  .palette-tile.is-current  { @apply border-black font-semibold; }
  .palette-tile.is-marked   { @apply border-purple-600; }
  .palette-tile.is-answered { @apply border-green-600 bg-green-50; }
  .palette-tile.is-marked.is-answered { @apply bg-purple-50; }

  .q-card       { @apply card; }
  .q-head       { @apply flex items-center justify-between mb-2; }
  .q-title      { @apply font-medium; }
  .q-mark-btn   { @apply btn-ghost text-sm; }
  .q-mark-btn.is-active { @apply bg-purple-600 text-white border-purple-600; }

  .option       { @apply flex items-center gap-2 border rounded p-2 cursor-pointer; }
  .option.is-checked { @apply border-black; }

  .q-foot       { @apply mt-3 flex items-center gap-2; }
  .q-clear      { @apply btn-ghost text-sm; }
  .q-time       { @apply text-xs muted ml-auto; }

  .runner-controls { @apply flex gap-2; }
  .btn-prev, .btn-next { @apply btn-ghost; }
  .btn-submit { @apply btn; }
}
